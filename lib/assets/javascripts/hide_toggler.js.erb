jQuery.fn.hide_toggler = function() {

  this.on('click', function(event) {
    $(this).closest('.toggler_parent').find('.togger_child').slideToggle('fast');
    event.preventDefault();
  });
  return this;
}

jQuery.fn.remove_loading_image = function() {
   $(this).find('img.loading').remove();
  return this;
}

$(function () {
	$('.toggler form').on('submit', function() {
		$(this).closest('.wip').find('.wic').append('<%=image_tag('loading_bar.gif', size: '100x15', class: 'loading')%>');
		$(this).slideUp('fast');
		$(this).closest('.toggler').find('.add_fields').slideDown('slow', adjustHeight);
	});
});